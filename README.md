# 微信公众号开发相关配置项介绍

## 为什么要讲微信开发相关配置

   已成型的微信公众号项目开发时，公众号的相关配置项往往是前后端之间的一个无人管地带，
当我们在开发过程中遇到问题的时候，很大程度上我们会忽略一个配置的问题，那么在问题的澄别上
我们往往会浪费很多的时间，而且前后端都很苦恼，后端往往会去看它的日志，然后给出结论是日志
没有报错，与他无关，此时前端无疑就变成了接锅侠。当前端来看代码的时候也很苦恼，因为公众号开发
的调试比较困难，必须很多东西必须在微信环境的前提下，由于环境的有限就算有微信
开发者工具也还只能走到微信调用的环节，后面的过程没办法在继续，真实环境就变成了开发调试
的硬伤。于是因为一两个问题很难找出原因，于是项目就出现延期、环境切换就bug无数、为了查找问题
头发都快拔光了。
所以，本次分享是希望能够通过与大家一起学习微信相关的配置，能够帮助以后大家对
<font color='#43B648'>微信环境有所
了解</font>，对微信公众号开发过程中<font color='#43B648'>澄别问题</font>有所帮助，
让前后端协同开发过程中的<font color='#43B648'>前端不再做接锅侠</font>。



## 主要介绍内容
### 1.微信开发调试工具介绍
### 2.服务器配置
### 3.ip白名单设置
### 4.支付白名单设置

### 微信开发调试工具介绍
1.什么是微信开发者工具？   

为帮助开发者更方便、更安全地开发和调试基于微信的网页，我们推出了 web 开发者工具。
它是一个桌面应用，它可以模拟微信客户端。   


2.微信开发者工具能够干什么？  

通过模拟微信客户端的表现，使得开发者可以使用这个工具方便地在 PC 
或者 Mac 上进行开发和调试工作。
你可以：   
* 使用自己的微信号来调试微信网页授权
* 调试、检验页面的 JS-SDK 相关功能与权限，模拟大部分 SDK 的输入和输出
* 使用基于 weinre 的移动调试功能，支持 X5 Blink 内核的远程调试
* 利用集成的 Chrome DevTools 协助开发

简单点说就是能够模拟微信环境，让部分只能在微信上做的事儿能够有在pc上模拟出来，而且还是
可调式状态，主要就是方便开发调试。
[微信开发者工具官方介绍地址](https://mp.weixin.qq.com/wiki?t=resource/res_main&id=mp1455784140)
### <font color='#F53315'>使用注意事项</font>
* <font color='#F53315'>想要能够调试一个微信公众号项目，你必须以一个该公众号
开发者的身份去登录微信开发者工具，
[如何成为一个开发者？登录演示](https://mp.weixin.qq.com/)
</font>
* <font color='#F53315'>这里涉及到几个角色，一个是管理员、一个是运营者身份、一个是开发者身份。很多时候
会被有的人搞混淆。
    * 管理员——管理员微信号可设置风险操作保护、风险操作提醒等保护账号安全。一般与开发无关。
    [详细介绍](http://kf.qq.com/faq/120911VrYVrA1412116ZRvuU.html)

    * 运营者——运营者微信号(长期及短期)可在开启安全保护下，进行登录账号和群发消息操作。
    主要是给运营的，一般与开发无关。
    [详细介绍](http://kf.qq.com/faq/120911VrYVrA141211FbEnq2.html)
    
    * 开发者——开发者微信号可在web开发者工具中进行本公众号的开发和调试。
    这个就和开发人员息息相关了。详细介绍，在web开发者工具里面有讲。
   
</font>

### 服务器配置介绍
1.服务器配置能干什么？ 
  
启用并设置服务器配置后，用户发给公众号的消息以及开发者需要的事件推送，
将被微信转发到该URL中。

简单点说就是微信把用户发给它的消息再次同样的推送给我们自己，也就是我们能够接收到用户
通过微信发送的东西，包含：文本消息、图片消息、语音消息、视频消息、
小视频消息、地理位置消息、链接消息、
。[消息推送相关介绍](https://mp.weixin.qq.com/wiki?t=resource/res_main&id=mp1421140453)

###   ip白名单设置   
1.什么是ip白名单？   
   想要调用公众号对应的接口，就必须要是对应的IP地址才能够调用成功。

2.为什么要设置IP白名单？
    为了提高公众平台开发者接口调用的安全性，避免一旦开发者ID和密码泄露后给帐号造成损失。我们对调用“获取access_token”
    接口增加IP白名单校验：只有将IP地址设置为公众号的IP白名单，才能成功调用该接口。
[IP白名单介绍](https://mp.weixin.qq.com/cgi-bin/announce?action=getannouncement&key=1495617578&version=1&lang=zh_CN&platform=2)

<font color='#F53315'>使用注意事项</font>   
<font color='#F53315'>多个IP地址用回车键隔开</font>

###  支付白名单设置
微信支付白名单就是只能是在支付白名单内的域名地址才能调用微信开放出来的API
   
<font color='#F53315'>如果我们不设置支付白名单会出现一些什么样的问题？</font>   
* <font color='#F53315'>我们的微信项目在微信的真实环境下发起支付的时候，会出现一瞬间的跳转
然后又返回了原来的页面。
</font> 
* <font color='#F53315'>前端点击支付的操作直接没有任何按钮</font> 

<font color='#F53315'>
这个时候后端去看日志，他的接口也没有报错，如果后端有过开发经验还好，不然前端无疑就成
接锅侠
</font> 


[微信支付介绍文档](https://pay.weixin.qq.com/wiki/doc/api/index.html)


###  最后重要的文档地址汇总

[微信公众号官方登录地址](https://mp.weixin.qq.com/)   

[微信开发者工具官方介绍地址](https://mp.weixin.qq.com/wiki?t=resource/res_main&id=mp1455784140)

[IP白名单介绍](https://mp.weixin.qq.com/cgi-bin/announce?action=getannouncement&key=1495617578&version=1&lang=zh_CN&platform=2)

[微信支付介绍文档](https://pay.weixin.qq.com/wiki/doc/api/index.html)

[微信公众平台接口在线调试](https://mp.weixin.qq.com/debug/cgi-bin/apiinfo?t=index&type=%E6%B6%88%E6%81%AF%E6%8E%A5%E5%8F%A3%E8%B0%83%E8%AF%95&form=%E5%9B%BE%E7%89%87%E6%B6%88%E6%81%AF)





